module.exports=[85400,a=>{"use strict";var b=a.i(17037),c=a.i(62603),d=a.i(79070),e=a.i(47752),f=a.i(91758),g=a.i(64910),h=a.i(81404),i=a.i(65222),j=a.i(18548),k=a.i(62259),l=a.i(68183),m=a.i(41221),n=a.i(16536),o=a.i(98288);let p=(0,a.i(5599).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var q=a.i(85807),r=a.i(77480),s=a.i(47148),t=a.i(219),u=a.i(5694);function v(a){let b={logo:{label:"Logo",pluralLabel:"Logolar",icon:d.PenTool,glowClass:"glow-indigo",iconBoxClass:"icon-box-indigo",badgeClass:"badge-indigo",textClass:"text-indigo-400"},product:{label:"Ürün Görseli",pluralLabel:"Ürün Görselleri",icon:e.Package,glowClass:"glow-emerald",iconBoxClass:"icon-box-emerald",badgeClass:"badge-emerald",textClass:"text-emerald-400"},post:{label:"Örnek Post",pluralLabel:"Örnek Postlar",icon:f.ImageIcon,glowClass:"glow-amber",iconBoxClass:"icon-box-amber",badgeClass:"badge-amber",textClass:"text-amber-400"}};return b[a]||b.logo}function w({file:a,onDelete:c,onPreview:d,isDeleting:e}){var g;let k=a.mime_type?.startsWith("image/"),l=v(a.category);return(0,b.jsxs)("div",{className:"file-card rounded-2xl overflow-hidden group",children:[(0,b.jsxs)("div",{className:(0,q.cn)("relative aspect-square flex items-center justify-center p-4","logo"!==a.category?"bg-zinc-800/50":"monochrome-dark"===a.sub_category?"bg-white":"monochrome-light"===a.sub_category?"bg-zinc-900":"bg-zinc-800/50"),children:[(0,b.jsxs)("div",{className:"actions absolute top-3 right-3 flex gap-1 z-10",children:[k&&(0,b.jsx)("button",{onClick:()=>d(a),className:"p-1.5 rounded-lg bg-black/50 text-white hover:bg-black/70 transition-colors",children:(0,b.jsx)(n.Eye,{className:"w-3.5 h-3.5"})}),(0,b.jsx)("a",{href:a.file_url,download:a.file_name,className:"p-1.5 rounded-lg bg-black/50 text-white hover:bg-black/70 transition-colors",children:(0,b.jsx)(h.Download,{className:"w-3.5 h-3.5"})}),(0,b.jsx)("button",{onClick:()=>c(a),disabled:e,className:"p-1.5 rounded-lg bg-black/50 text-white hover:bg-rose-500/70 transition-colors disabled:opacity-50",children:e?(0,b.jsx)(m.Loader2,{className:"w-3.5 h-3.5 animate-spin"}):(0,b.jsx)(i.Trash2,{className:"w-3.5 h-3.5"})})]}),a.is_primary&&(0,b.jsx)("div",{className:"absolute top-3 left-3 z-10",children:(0,b.jsxs)("span",{className:"flex items-center gap-1 text-[10px] px-2 py-1 rounded-full font-semibold bg-gradient-to-r from-amber-400 to-orange-500 text-black",children:[(0,b.jsx)(j.Star,{className:"w-3 h-3"}),"Ana"]})}),k?(0,b.jsx)("img",{src:a.file_url,alt:a.file_name,className:"max-w-full max-h-full object-contain"}):(0,b.jsx)(f.ImageIcon,{className:"w-12 h-12 text-zinc-500"})]}),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-white truncate",title:a.file_name,children:a.file_name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[a.customer&&(0,b.jsx)("span",{className:"badge badge-violet text-[10px] truncate max-w-[100px]",title:a.customer.brand_name,children:a.customer.brand_name}),(0,b.jsx)("span",{className:(0,q.cn)("badge",l.badgeClass),children:l.label})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,b.jsx)("span",{className:"text-xs text-zinc-500",children:new Date(a.created_at).toLocaleDateString("tr-TR")}),(0,b.jsx)("span",{className:"text-xs text-zinc-500 font-mono",children:(g=a.file_size)?g<1024?`${g} B`:g<1048576?`${(g/1024).toFixed(0)} KB`:`${(g/1048576).toFixed(1)} MB`:"—"})]})]})]})}function x(){let a=(0,r.createClient)(),[h,i]=(0,c.useState)([]),[j,n]=(0,c.useState)([]),[x,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)("all"),[B,C]=(0,c.useState)("all"),[D,E]=(0,c.useState)("newest"),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)({isOpen:!1,file:null}),[L,M]=(0,c.useState)(null);(0,c.useEffect)(()=>{!async function(){y(!0);try{let{data:b,error:c}=await a.from("customers").select("id, brand_name").eq("status","active").order("brand_name");if(c)throw c;let d=b||[];n(d);let{data:e,error:f}=await a.from("customer_files").select("*").order("created_at",{ascending:!1});if(f)throw f;let g=new Map(d.map(a=>[a.id,a])),h=(e||[]).map(a=>({...a,customer:g.get(a.customer_id)||void 0}));i(h)}catch(a){console.error("Error fetching data:",a)}finally{y(!1)}}()},[]);let N=(0,c.useMemo)(()=>({logo:h.filter(a=>"logo"===a.category).length,product:h.filter(a=>"product"===a.category).length,post:h.filter(a=>"post"===a.category).length,total:h.length}),[h]),O=(0,c.useMemo)(()=>{let a=[...h];if("all"!==z&&(a=a.filter(a=>a.category===z)),"all"!==B&&(a=a.filter(a=>a.customer_id===B)),F.trim()){let b=F.toLowerCase();a=a.filter(a=>a.file_name.toLowerCase().includes(b)||a.customer?.brand_name.toLowerCase().includes(b))}return a.sort((a,b)=>{switch(D){case"oldest":return new Date(a.created_at).getTime()-new Date(b.created_at).getTime();case"name":return a.file_name.localeCompare(b.file_name);case"size":return(b.file_size||0)-(a.file_size||0);default:return new Date(b.created_at).getTime()-new Date(a.created_at).getTime()}}),a},[h,z,B,F,D]),P=(0,c.useMemo)(()=>({logo:O.filter(a=>"logo"===a.category),product:O.filter(a=>"product"===a.category),post:O.filter(a=>"post"===a.category)}),[O]),Q=async()=>{let b=J.file;if(b){I(b.id);try{let c=b.file_url.split("/customer-files/");c[1]&&await a.storage.from("customer-files").remove([c[1]]);let{error:d}=await a.from("customer_files").delete().eq("id",b.id);if(d)throw d;i(h.filter(a=>a.id!==b.id)),K({isOpen:!1,file:null})}catch(a){console.error("Error deleting file:",a)}finally{I(null)}}},R=({category:a,sectionFiles:c})=>{if(0===c.length)return null;let d=v(a),e=d.icon;return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(e,{className:(0,q.cn)("w-5 h-5",d.textClass)}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-white",children:d.pluralLabel}),(0,b.jsx)("span",{className:"badge badge-neutral font-mono",children:c.length})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-5",children:c.map(a=>(0,b.jsx)(w,{file:a,onDelete:a=>K({isOpen:!0,file:a}),onPreview:M,isDeleting:H===a.id},a.id))})]})};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Tüm Dosyalar"}),(0,b.jsx)("p",{className:"text-sm text-zinc-500 mt-1",children:"Tüm markaların görselleri, logoları ve içerik dosyaları"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5",children:[(0,b.jsx)("div",{onClick:()=>A("logo"===z?"all":"logo"),className:(0,q.cn)("glass-card rounded-2xl p-5 card-hover cursor-pointer","logo"===z?"glow-indigo":""),children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"icon-box icon-box-indigo",children:(0,b.jsx)(d.PenTool,{className:"w-6 h-6 text-indigo-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-white font-mono mb-1",children:N.logo}),(0,b.jsx)("p",{className:"text-sm text-zinc-500",children:"Logo"})]})]})}),(0,b.jsx)("div",{onClick:()=>A("product"===z?"all":"product"),className:(0,q.cn)("glass-card rounded-2xl p-5 card-hover cursor-pointer","product"===z?"glow-emerald":""),children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"icon-box icon-box-emerald",children:(0,b.jsx)(e.Package,{className:"w-6 h-6 text-emerald-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-white font-mono mb-1",children:N.product}),(0,b.jsx)("p",{className:"text-sm text-zinc-500",children:"Ürün Görseli"})]})]})}),(0,b.jsx)("div",{onClick:()=>A("post"===z?"all":"post"),className:(0,q.cn)("glass-card rounded-2xl p-5 card-hover cursor-pointer","post"===z?"glow-amber":""),children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"icon-box icon-box-amber",children:(0,b.jsx)(f.ImageIcon,{className:"w-6 h-6 text-amber-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-white font-mono mb-1",children:N.post}),(0,b.jsx)("p",{className:"text-sm text-zinc-500",children:"Örnek Post"})]})]})}),(0,b.jsx)("div",{onClick:()=>A("all"),className:(0,q.cn)("glass-card rounded-2xl p-5 card-hover cursor-pointer","all"===z?"glow-violet":""),children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"icon-box icon-box-violet",children:(0,b.jsx)(g.Folder,{className:"w-6 h-6 text-violet-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-3xl font-bold text-white font-mono mb-1",children:N.total}),(0,b.jsx)("p",{className:"text-sm text-zinc-500",children:"Toplam"})]})]})})]}),(0,b.jsxs)("div",{className:"glass-card rounded-2xl p-4 border border-white/10",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,b.jsx)(k.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),(0,b.jsx)("input",{type:"text",placeholder:"Dosya veya marka ara...",value:F,onChange:a=>G(a.target.value),className:"w-full pl-10 pr-10 py-2.5 rounded-xl text-sm bg-white/5 border border-white/10 text-white placeholder:text-zinc-600 focus:outline-none focus:border-indigo-500/50 transition-colors"}),F&&(0,b.jsx)("button",{onClick:()=>G(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-md hover:bg-white/10 text-zinc-500 hover:text-white transition-colors",children:(0,b.jsx)(l.X,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.Building2,{className:"w-4 h-4 text-zinc-500"}),(0,b.jsxs)(s.Select,{value:B,onValueChange:C,children:[(0,b.jsx)(s.SelectTrigger,{className:"w-[180px] bg-white/5 border-white/10 text-white",children:(0,b.jsx)(s.SelectValue,{placeholder:"Tüm Markalar"})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"all",children:"Tüm Markalar"}),j.map(a=>(0,b.jsx)(s.SelectItem,{value:a.id,children:a.brand_name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p,{className:"w-4 h-4 text-zinc-500"}),(0,b.jsxs)(s.Select,{value:z,onValueChange:a=>A(a),children:[(0,b.jsx)(s.SelectTrigger,{className:"w-[160px] bg-white/5 border-white/10 text-white",children:(0,b.jsx)(s.SelectValue,{})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"all",children:"Tüm Kategoriler"}),(0,b.jsx)(s.SelectItem,{value:"logo",children:"Logolar"}),(0,b.jsx)(s.SelectItem,{value:"product",children:"Ürün Görselleri"}),(0,b.jsx)(s.SelectItem,{value:"post",children:"Örnek Postlar"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xs text-zinc-500",children:"Sırala:"}),(0,b.jsxs)(s.Select,{value:D,onValueChange:a=>E(a),children:[(0,b.jsx)(s.SelectTrigger,{className:"w-[120px] bg-white/5 border-white/10 text-white text-sm",children:(0,b.jsx)(s.SelectValue,{})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"newest",children:"En Yeni"}),(0,b.jsx)(s.SelectItem,{value:"oldest",children:"En Eski"}),(0,b.jsx)(s.SelectItem,{value:"name",children:"İsim (A-Z)"}),(0,b.jsx)(s.SelectItem,{value:"size",children:"Boyut"})]})]})]})]}),("all"!==B||"all"!==z||F)&&(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-white/5",children:[(0,b.jsx)("span",{className:"text-xs text-zinc-500",children:"Aktif filtreler:"}),"all"!==B&&(0,b.jsxs)("span",{className:"badge badge-violet flex items-center gap-1",children:[j.find(a=>a.id===B)?.brand_name,(0,b.jsx)("button",{onClick:()=>C("all"),className:"hover:text-white",children:(0,b.jsx)(l.X,{className:"w-3 h-3"})})]}),"all"!==z&&(0,b.jsxs)("span",{className:(0,q.cn)("badge flex items-center gap-1",v(z).badgeClass),children:[v(z).label,(0,b.jsx)("button",{onClick:()=>A("all"),className:"hover:text-white",children:(0,b.jsx)(l.X,{className:"w-3 h-3"})})]}),F&&(0,b.jsxs)("span",{className:"badge badge-neutral flex items-center gap-1",children:['"',F,'"',(0,b.jsx)("button",{onClick:()=>G(""),className:"hover:text-white",children:(0,b.jsx)(l.X,{className:"w-3 h-3"})})]}),(0,b.jsx)("button",{onClick:()=>{C("all"),A("all"),G("")},className:"text-xs text-indigo-400 hover:text-indigo-300 ml-auto",children:"Tümünü Temizle"})]})]}),(F||"all"!==B||"all"!==z)&&(0,b.jsxs)("div",{className:"text-sm text-zinc-500",children:[O.length," dosya bulundu"]}),x?(0,b.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,b.jsx)(m.Loader2,{className:"w-8 h-8 text-indigo-500 animate-spin"})}):(0,b.jsxs)(b.Fragment,{children:["all"===z?(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)(R,{category:"logo",sectionFiles:P.logo}),(0,b.jsx)(R,{category:"product",sectionFiles:P.product}),(0,b.jsx)(R,{category:"post",sectionFiles:P.post})]}):(0,b.jsx)(R,{category:z,sectionFiles:O}),0===h.length&&(0,b.jsxs)("div",{className:"glass-card rounded-2xl p-12 border border-white/10 text-center",children:[(0,b.jsx)("div",{className:"icon-box icon-box-default w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(g.Folder,{className:"w-8 h-8 text-zinc-500"})}),(0,b.jsx)("h3",{className:"font-semibold text-white mb-2",children:"Henüz dosya yüklenmedi"}),(0,b.jsx)("p",{className:"text-sm text-zinc-500",children:"Marka detay sayfalarından dosya yükleyebilirsiniz."})]}),h.length>0&&0===O.length&&(0,b.jsxs)("div",{className:"glass-card rounded-2xl p-12 border border-white/10 text-center",children:[(0,b.jsx)("div",{className:"icon-box icon-box-default w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(k.Search,{className:"w-8 h-8 text-zinc-500"})}),(0,b.jsx)("h3",{className:"font-semibold text-white mb-2",children:"Sonuç bulunamadı"}),(0,b.jsx)("p",{className:"text-sm text-zinc-500 mb-4",children:"Filtreleri değiştirerek tekrar deneyin."}),(0,b.jsx)("button",{onClick:()=>{C("all"),A("all"),G("")},className:"btn-secondary px-4 py-2 rounded-xl",children:"Filtreleri Temizle"})]})]}),(0,b.jsx)(t.ConfirmModal,{isOpen:J.isOpen,onClose:()=>K({isOpen:!1,file:null}),onConfirm:Q,variant:"danger",title:"Dosyayı Sil",description:`"${J.file?.file_name}" dosyasını silmek istediğinize emin misiniz? Bu işlem geri alınamaz.`,confirmText:"Sil",cancelText:"İptal",isLoading:H===J.file?.id}),(0,b.jsx)(u.Dialog,{open:!!L,onOpenChange:()=>M(null),children:(0,b.jsxs)(u.DialogContent,{className:"max-w-4xl bg-zinc-900 border-white/10",children:[(0,b.jsx)(u.DialogHeader,{children:(0,b.jsxs)(u.DialogTitle,{className:"text-white flex items-center gap-2",children:[L?.file_name,L?.customer&&(0,b.jsx)("span",{className:"badge badge-violet text-xs",children:L.customer.brand_name})]})}),(0,b.jsx)("div",{className:"flex items-center justify-center p-4 bg-zinc-800 rounded-lg min-h-[400px]",children:L&&(0,b.jsx)("img",{src:L.file_url,alt:L.file_name,className:"max-w-full max-h-[60vh] object-contain"})})]})})]})}a.s(["default",()=>x],85400)}];

//# sourceMappingURL=Desktop_ajans-bee-platform_src_app_%28dashboard%29_gorseller_page_tsx_8da5a972._.js.map
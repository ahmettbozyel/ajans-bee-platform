(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6009,e=>{"use strict";var t=e.i(12588),s=e.i(77629),a=e.i(91990),i=e.i(11891),l=e.i(18828),r=e.i(39550),n=e.i(44123),d=e.i(65419),o=e.i(62915),c=e.i(46338),m=e.i(60522);let x=(0,m.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var h=e.i(21370),u=e.i(43326),b=e.i(6778),g=e.i(96704),p=e.i(94719),j=e.i(89956),f=e.i(3969);let N=(0,m.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),v=(0,m.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);var w=e.i(83108),y=e.i(44052),_=e.i(85080),k=e.i(98219),z=e.i(87402),C=e.i(52969);let S=(0,m.default)("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var R=e.i(55912),O=e.i(17193);let D=(0,m.default)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),T=(0,m.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var $=e.i(48433),A=e.i(46336);function B(e){if(!e||e<0)return"0d";let t=Math.floor(e/3600),s=Math.floor(e%3600/60);return t>0?`${t}s ${s}d`:`${s}d`}function E(e){if(!e||e<0)return"0 saat";let t=Math.floor(e/3600);return`${t} saat`}function M(e){return new Date(e).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit",timeZone:"Europe/Istanbul"})}function L(e){return new Date(e).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",weekday:"long"})}function G(e){return new Date(e).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"})}function q(e){if(!e)return l.AVATAR_COLORS.default;let t=e.charAt(0).toUpperCase();return l.AVATAR_COLORS[t]||l.AVATAR_COLORS.default}function I({count:e}){if(0===e)return null;let s=[],a=Math.min(e,4),i=["bg-rose-400","bg-rose-500","bg-rose-600","bg-rose-700"];for(let l=0;l<a;l++)s.push((0,t.jsx)("div",{className:`w-2 h-2 rounded-full ${i[l]}`,title:`${e} Revize`},l));return(0,t.jsx)("div",{className:"flex items-center gap-0.5",children:s})}function P({status:e}){let{label:s,icon:a,classes:i}={active:{label:"Devam Ediyor",icon:(0,t.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"}),classes:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"},paused:{label:"Beklemede",icon:(0,t.jsx)(N,{className:"w-3 h-3"}),classes:"bg-amber-500/20 text-amber-400 border-amber-500/30"},completed:{label:"Tamamlandı",icon:(0,t.jsx)(g.CheckCircle,{className:"w-3 h-3"}),classes:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"}}[e];return(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 text-xs px-2 py-0.5 rounded-full border ${i}`,children:[a,s]})}function Y({icon:e,value:s,label:a,color:i,subtitle:l}){let r={indigo:{iconBg:"bg-indigo-500/10 border-indigo-500/20 text-indigo-400",glow:"glow-indigo"},emerald:{iconBg:"bg-emerald-500/10 border-emerald-500/20 text-emerald-400",glow:"glow-emerald"},amber:{iconBg:"bg-amber-500/10 border-amber-500/20 text-amber-400",glow:"glow-amber"},rose:{iconBg:"bg-rose-500/10 border-rose-500/20 text-rose-400",glow:"glow-rose"},cyan:{iconBg:"bg-cyan-500/10 border-cyan-500/20 text-cyan-400",glow:"glow-cyan"}},{iconBg:n,glow:d}=r[i]||r.indigo;return(0,t.jsxs)("div",{className:`glass-card rounded-2xl p-4 border border-white/10 ${d} card-hover`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("div",{className:`p-2 rounded-lg border ${n}`,children:e}),(0,t.jsx)("span",{className:"text-xs text-zinc-500",children:l||"Bugün"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-white",children:s}),(0,t.jsx)("p",{className:"text-xs text-zinc-500",children:a})]})}function V({task:e,isAdmin:a,revisions:i,onPause:r,onResume:n,onComplete:d,onStartRevision:m,onReopen:u,onEdit:b,onDelete:g}){let[j,f]=(0,s.useState)(e.total_duration),[y,_]=(0,s.useState)(!1),k=i.filter(t=>t.task_id===e.id).sort((e,t)=>e.revision_number-t.revision_number);(0,s.useEffect)(()=>{if("active"!==e.status)return void f(e.total_duration);let t=new Date(e.start_time).getTime(),s=e.total_duration||0,a=setInterval(()=>{f(s+Math.floor((Date.now()-t)/1e3))},1e3);return()=>clearInterval(a)},[e.status,e.start_time,e.total_duration]);let z=e.category?.slug||"genel",C=l.CATEGORY_COLORS[z]||l.CATEGORY_COLORS.genel;return(0,t.jsxs)("div",{className:`glass-card rounded-2xl transition-all hover:bg-white/[0.02] hover:border-white/20 group ${"active"===e.status?"border-emerald-500/30 glow-emerald":"border-white/10"}`,children:[(0,t.jsxs)("div",{className:"p-5 cursor-pointer",onClick:()=>_(!y),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[a&&e.user&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`h-7 w-7 rounded-full bg-gradient-to-br ${q(e.user.full_name)} flex items-center justify-center`,children:(0,t.jsx)("span",{className:"text-white text-xs font-bold",children:e.user.full_name?.charAt(0)||"?"})}),(0,t.jsx)("span",{className:"text-sm font-medium text-zinc-300",children:e.user.full_name?.split(" ")[0]})]}),(0,t.jsx)(P,{status:e.status}),(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full ${C.bg} ${C.text} border ${C.border}`,children:e.category?.name||"Genel"}),e.brand&&(0,t.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full bg-amber-500/20 text-amber-400 border border-amber-500/30",children:[(0,t.jsx)(o.Building2,{className:"w-3 h-3 inline mr-1"}),e.brand.brand_name]}),(0,t.jsx)(I,{count:e.revision_count}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)("div",{className:"flex items-center gap-1 opacity-50 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),b(e)},className:"p-1.5 rounded-lg hover:bg-white/10 text-zinc-400 hover:text-zinc-200 transition-colors",children:(0,t.jsx)(x,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),g(e)},className:"p-1.5 rounded-lg hover:bg-rose-500/20 text-zinc-400 hover:text-rose-400 transition-colors",children:(0,t.jsx)(c.Trash2,{className:"w-4 h-4"})})]})]}),(0,t.jsx)("h3",{className:"text-base font-semibold text-white mb-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-zinc-400",children:[(0,t.jsx)(p.Clock,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"font-mono text-sm",children:M(e.start_time)}),(0,t.jsx)("span",{className:"text-zinc-600",children:"→"}),e.end_time?(0,t.jsx)("span",{className:"font-mono text-sm",children:M(e.end_time)}):(0,t.jsx)("span",{className:"text-zinc-600 font-mono",children:"..."})]}),"active"===e.status?(0,t.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-lg bg-emerald-500/20 text-emerald-400 font-mono text-sm font-semibold",children:B(j)}):"completed"===e.status?(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-lg bg-emerald-500/10 text-emerald-400 font-mono text-sm",children:[(0,t.jsx)(h.Check,{className:"w-3 h-3"}),B(e.total_duration)]}):(0,t.jsx)("span",{className:"px-2 py-0.5 rounded-lg bg-white/5 text-zinc-400 font-mono text-sm",children:B(e.total_duration)}),e.revision_count>0&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-lg bg-rose-500/10 text-rose-400 font-mono text-sm",children:[(0,t.jsx)(w.RefreshCw,{className:"w-3 h-3"}),"R",e.revision_count]})]})]}),y&&(0,t.jsxs)("div",{className:"border-t border-white/10 p-5 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)($.History,{className:"w-4 h-4 text-zinc-500"}),(0,t.jsx)("span",{className:"text-zinc-400",children:"Başlangıç:"}),(0,t.jsx)("span",{className:"font-mono text-white",children:M(e.start_time)})]}),e.end_time&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-zinc-400",children:"Bitiş:"}),(0,t.jsx)("span",{className:"font-mono text-white",children:M(e.end_time)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-zinc-400",children:"Toplam:"}),(0,t.jsx)("span",{className:"font-mono font-semibold text-cyan-400",children:B(e.total_duration)})]})]}),k.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-zinc-400",children:[(0,t.jsx)(w.RefreshCw,{className:"w-4 h-4 text-rose-400"}),(0,t.jsx)("span",{children:"Revize Geçmişi"})]}),(0,t.jsx)("div",{className:"space-y-2 pl-6",children:k.map(e=>(0,t.jsxs)("div",{className:"flex items-start gap-3 text-sm",children:[(0,t.jsxs)("span",{className:"px-2 py-0.5 rounded-full bg-rose-500/20 text-rose-400 text-xs font-medium",children:["R",e.revision_number]}),(0,t.jsxs)("div",{className:"flex-1",children:[e.note?(0,t.jsx)("p",{className:"text-zinc-300",children:e.note}):(0,t.jsx)("p",{className:"text-zinc-500 italic",children:"Not girilmedi"}),(0,t.jsxs)("p",{className:"text-xs text-zinc-500 mt-0.5",children:[M(e.start_time),e.duration>0&&` • ${B(e.duration)}`]})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:["active"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),r(e)},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-xl bg-amber-500/10 border border-amber-500/30 text-amber-400 text-xs font-medium hover:bg-amber-500/20 transition-colors",children:[(0,t.jsx)(N,{className:"w-3 h-3"}),"Beklet"]}),(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),d(e)},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-xl bg-emerald-500 text-white text-xs font-medium hover:bg-emerald-600 transition-colors",children:[(0,t.jsx)(h.Check,{className:"w-3 h-3"}),"Bitti"]})]}),"paused"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),n(e)},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-xl bg-emerald-500/10 border border-emerald-500/30 text-emerald-400 text-xs font-medium hover:bg-emerald-500/20 transition-colors",children:[(0,t.jsx)(v,{className:"w-3 h-3"}),"Devam Et"]}),(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),d(e)},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-xl bg-emerald-500 text-white text-xs font-medium hover:bg-emerald-600 transition-colors",children:[(0,t.jsx)(h.Check,{className:"w-3 h-3"}),"Bitti"]})]}),"completed"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),m(e)},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-xl bg-rose-500/10 border border-rose-500/30 text-rose-400 text-xs font-medium hover:bg-rose-500/20 transition-colors",children:[(0,t.jsx)(w.RefreshCw,{className:"w-3 h-3"}),"Revize Başlat"]}),(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),u(e)},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-xl bg-amber-500/10 border border-amber-500/30 text-amber-400 text-xs font-medium hover:bg-amber-500/20 transition-colors",children:[(0,t.jsx)(T,{className:"w-3 h-3"}),"Yenile"]})]})]})]})]})}function F({task:e,onClose:a,onSubmit:i}){let[l,r]=(0,s.useState)(""),[n,d]=(0,s.useState)(!1),o=async e=>{e.preventDefault(),d(!0),await i(l),d(!1)};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-white/10 shadow-2xl",style:{backgroundColor:"#18181b"},children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-white/10",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Revize Başlat"}),(0,t.jsx)("p",{className:"text-sm text-zinc-400 mt-1",children:e.description})]}),(0,t.jsxs)("form",{onSubmit:o,children:[(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:["Revize Notu ",(0,t.jsx)("span",{className:"text-zinc-500",children:"(Opsiyonel)"})]}),(0,t.jsx)("textarea",{value:l,onChange:e=>r(e.target.value),placeholder:"Müşteri geri bildirimi, değişiklik detayı...",rows:3,className:"w-full px-4 py-3 rounded-xl text-sm text-white bg-white/5 border border-white/10 placeholder:text-zinc-500 focus:outline-none focus:border-indigo-500/50 focus:ring-2 focus:ring-indigo-500/20 resize-none transition-all"})]}),(0,t.jsx)("div",{className:"p-3 rounded-xl bg-rose-500/10 border border-rose-500/20",children:(0,t.jsxs)("p",{className:"text-xs text-rose-400",children:[(0,t.jsx)(w.RefreshCw,{className:"w-3 h-3 inline mr-1"}),"Revize başlatıldığında görev tekrar aktif olacak ve sayaç devam edecek."]})})]}),(0,t.jsxs)("div",{className:"px-6 py-4 border-t border-white/10 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:a,className:"h-11 px-5 rounded-xl text-sm font-medium bg-white/5 border border-white/10 text-zinc-300 hover:bg-white/10 active:scale-[0.98] transition-all",children:"İptal"}),(0,t.jsxs)("button",{type:"submit",disabled:n,className:"h-11 px-5 rounded-xl text-white text-sm font-medium bg-gradient-to-r from-rose-600 to-pink-600 shadow-lg shadow-rose-500/25 hover:shadow-rose-500/40 active:scale-[0.98] transition-all disabled:opacity-50 flex items-center gap-2",children:[n?(0,t.jsx)(u.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(w.RefreshCw,{className:"w-4 h-4"}),"Revize Başlat"]})]})]})]})})}function H({tasks:e,users:s}){let a=s.map(t=>{let s=e.filter(e=>e.user_id===t.id);return{user:t,totalDuration:s.reduce((e,t)=>e+(t.total_duration||0),0),taskCount:s.length}}).filter(e=>e.taskCount>0).sort((e,t)=>t.totalDuration-e.totalDuration),i={};e.forEach(e=>{let t=e.brand?.brand_name||"Genel";i[t]||(i[t]={name:t,duration:0}),i[t].duration+=e.total_duration||0});let l=Object.values(i).sort((e,t)=>t.duration-e.duration).slice(0,5),r=l.reduce((e,t)=>e+t.duration,0),n=e.reduce((e,t)=>e+t.revision_count,0),d=e.filter(e=>e.revision_count>0),o=e.length>0?(n/e.length).toFixed(1):"0",c={};e.forEach(e=>{if(e.revision_count>0){let t=e.brand?.brand_name||"Genel";c[t]||(c[t]={name:t,count:0}),c[t].count+=e.revision_count}});let m=Object.values(c).sort((e,t)=>t.count-e.count)[0],x=Math.max(...a.map(e=>e.totalDuration),1),h=["from-rose-500 to-pink-500","from-violet-500 to-purple-500","from-cyan-500 to-blue-500","from-amber-500 to-orange-500","from-emerald-500 to-teal-500"],u=["from-amber-500 to-orange-500","from-cyan-500 to-blue-500","from-violet-500 to-purple-500","from-emerald-500 to-teal-500","from-rose-500 to-pink-500"];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5 border border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(y.Trophy,{className:"w-5 h-5 text-amber-400"}),(0,t.jsx)("h3",{className:"font-semibold text-white",children:"Bugün Performans"})]}),(0,t.jsx)("div",{className:"space-y-3",children:0===a.length?(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:"Henüz veri yok"}):a.slice(0,5).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`h-8 w-8 rounded-full bg-gradient-to-br ${q(e.user.full_name)} flex items-center justify-center flex-shrink-0`,children:(0,t.jsx)("span",{className:"text-white text-xs font-bold",children:e.user.full_name?.charAt(0)||"?"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-sm text-white",children:e.user.full_name?.split(" ")[0]}),(0,t.jsx)("span",{className:"text-xs font-mono text-zinc-400",children:B(e.totalDuration)})]}),(0,t.jsx)("div",{className:"h-2 rounded-full bg-white/10",children:(0,t.jsx)("div",{className:`h-full rounded-full bg-gradient-to-r ${h[s%h.length]}`,style:{width:`${e.totalDuration/x*100}%`}})})]})]},e.user.id))})]}),(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5 border border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(_.PieChart,{className:"w-5 h-5 text-violet-400"}),(0,t.jsx)("h3",{className:"font-semibold text-white",children:"Marka Dağılımı"})]}),(0,t.jsx)("div",{className:"space-y-3",children:0===l.length?(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:"Henüz veri yok"}):l.map((e,s)=>{let a=r>0?Math.round(e.duration/r*100):0;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-400",children:e.name}),(0,t.jsxs)("span",{className:"text-xs font-mono text-zinc-500",children:[B(e.duration)," (",a,"%)"]})]}),(0,t.jsx)("div",{className:"h-2 rounded-full bg-white/10",children:(0,t.jsx)("div",{className:`h-full rounded-full bg-gradient-to-r ${u[s%u.length]}`,style:{width:`${a}%`}})})]},e.name)})})]}),(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5 border border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(k.AlertTriangle,{className:"w-5 h-5 text-rose-400"}),(0,t.jsx)("h3",{className:"font-semibold text-white",children:"Revize Durumu"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-full bg-rose-500/10 border border-rose-500/20",children:[(0,t.jsx)("span",{className:"text-sm text-white ml-2",children:"Bugün Revize"}),(0,t.jsx)("span",{className:"text-lg font-bold text-rose-400 mr-2",children:n})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-400",children:"Revizeli İş"}),(0,t.jsx)("span",{className:"text-sm font-mono font-semibold text-zinc-300",children:d.length})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-400",children:"Ort. Revize / İş"}),(0,t.jsx)("span",{className:"text-sm font-mono font-semibold text-zinc-300",children:o})]}),m&&(0,t.jsxs)("div",{className:"pt-3 border-t border-white/10",children:[(0,t.jsx)("p",{className:"text-xs text-zinc-500 mb-2",children:"En Çok Revize Alan"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-cyan-500/20 text-cyan-400",children:m.name}),(0,t.jsxs)("span",{className:"text-xs text-rose-400",children:[m.count," revize"]})]})]})]})]})]})}function U({tasks:e,allMonthTasks:s,categories:a}){let i=s.length,r=s.reduce((e,t)=>e+(t.total_duration||0),0),n=s.reduce((e,t)=>e+t.revision_count,0),d=new Set(s.map(e=>e.work_date)).size,o=d>0?Math.floor(r/d):0,c={};s.forEach(e=>{let t=e.brand?.brand_name||"Genel";c[t]||(c[t]={name:t,duration:0}),c[t].duration+=e.total_duration||0});let m=Object.values(c).sort((e,t)=>t.duration-e.duration).slice(0,5),x=m.reduce((e,t)=>e+t.duration,0),h={};s.forEach(e=>{let t=e.category?.name||"Genel",s=e.category?.slug||"genel";h[s]||(h[s]={name:t,slug:s,count:0}),h[s].count++});let u=Object.values(h).sort((e,t)=>t.count-e.count),b=["from-amber-500 to-orange-500","from-cyan-500 to-blue-500","from-violet-500 to-purple-500","from-emerald-500 to-teal-500","from-rose-500 to-pink-500"];return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5 border border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(O.BarChart3,{className:"w-5 h-5 text-indigo-400"}),(0,t.jsx)("h3",{className:"font-semibold text-white",children:"Bu Ay Özetim"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-400",children:"Toplam İş"}),(0,t.jsxs)("span",{className:"text-sm font-mono font-bold text-white",children:[i," iş"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-400",children:"Toplam Süre"}),(0,t.jsx)("span",{className:"text-sm font-mono font-bold text-white",children:E(r)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-400",children:"Ortalama / Gün"}),(0,t.jsx)("span",{className:"text-sm font-mono font-bold text-white",children:B(o)})]}),(0,t.jsx)("div",{className:"h-px bg-white/10 my-2"}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-400",children:"Revize Sayısı"}),(0,t.jsx)("span",{className:"text-sm font-mono font-bold text-rose-400",children:n})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-400",children:"Revize Süresi"}),(0,t.jsx)("span",{className:"text-sm font-mono font-bold text-rose-400",children:B(35*n*60)})]})]})]}),(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5 border border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(_.PieChart,{className:"w-5 h-5 text-violet-400"}),(0,t.jsx)("h3",{className:"font-semibold text-white",children:"Marka Dağılımı"})]}),(0,t.jsx)("div",{className:"space-y-3",children:0===m.length?(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:"Henüz veri yok"}):m.map((e,s)=>{let a=x>0?Math.round(e.duration/x*100):0;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-400",children:e.name}),(0,t.jsxs)("span",{className:"text-xs font-mono text-zinc-500",children:[E(e.duration)," (",a,"%)"]})]}),(0,t.jsx)("div",{className:"h-2 rounded-full bg-white/10",children:(0,t.jsx)("div",{className:`h-full rounded-full bg-gradient-to-r ${b[s%b.length]}`,style:{width:`${a}%`}})})]},e.name)})})]}),(0,t.jsxs)("div",{className:"glass-card rounded-2xl p-5 border border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(D,{className:"w-5 h-5 text-cyan-400"}),(0,t.jsx)("h3",{className:"font-semibold text-white",children:"Kategori Dağılımı"})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:0===u.length?(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:"Henüz veri yok"}):u.map(e=>{let s=l.CATEGORY_COLORS[e.slug]||l.CATEGORY_COLORS.genel;return(0,t.jsxs)("span",{className:`text-xs px-2.5 py-1 rounded-full ${s.bg} ${s.text} border ${s.border}`,children:[e.name," ",(0,t.jsx)("span",{className:"font-mono font-bold",children:e.count})]},e.slug)})})]})]})}function K(){let{appUser:e,isAdmin:o}=(0,a.useAuth)(),[c,m]=(0,s.useState)([]),[x,N]=(0,s.useState)([]),[v,y]=(0,s.useState)([]),[_,k]=(0,s.useState)([]),[O,D]=(0,s.useState)([]),[T,$]=(0,s.useState)([]),[E,M]=(0,s.useState)(!0),[I,P]=(0,s.useState)(new Date().toISOString().split("T")[0]),[K,Z]=(0,s.useState)("all"),[J,Q]=(0,s.useState)("all"),[W,X]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(!1),[es,ea]=(0,s.useState)(null),[ei,el]=(0,s.useState)(null),[er,en]=(0,s.useState)({brand_id:"",category_id:"",description:""}),[ed,eo]=(0,s.useState)(!1),ec=(0,i.createClient)(),em=(0,s.useCallback)(async()=>{M(!0);try{let{data:t}=await ec.from("task_categories").select("*").eq("is_active",!0).order("sort_order");t&&k(t);let{data:s}=await ec.from("customers").select("id, brand_name").eq("status","active").order("brand_name");if(s&&D(s),o){let{data:e}=await ec.from("users").select("*").eq("is_active",!0).neq("role","admin").order("full_name");e&&$(e)}let a=ec.from("daily_tasks").select(`
          *,
          category:task_categories(*),
          brand:customers(id, brand_name),
          user:users(id, full_name, email, role)
        `).eq("work_date",I).order("created_at",{ascending:!1});!o&&e?a=a.eq("user_id",e.id):"all"!==K&&(a=a.eq("user_id",K)),"all"!==J&&(a=a.eq("brand_id",J));let{data:i}=await a;if(i){m(i);let e=i.map(e=>e.id);if(e.length>0){let{data:t}=await ec.from("task_revisions").select("*").in("task_id",e).order("revision_number");t&&N(t)}else N([])}if(!o&&e){let t=new Date(I),s=new Date(t.getFullYear(),t.getMonth(),1).toISOString().split("T")[0],a=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString().split("T")[0],{data:i}=await ec.from("daily_tasks").select(`
            *,
            category:task_categories(*),
            brand:customers(id, brand_name)
          `).eq("user_id",e.id).gte("work_date",s).lte("work_date",a);i&&y(i)}}catch(e){console.error("Fetch error:",e)}finally{M(!1)}},[I,K,J,o,e,ec]);(0,s.useEffect)(()=>{em()},[em]);let ex={total:c.length,completed:c.filter(e=>"completed"===e.status).length,active:c.filter(e=>"active"===e.status).length,revisions:c.reduce((e,t)=>e+t.revision_count,0),totalDuration:c.reduce((e,t)=>e+(t.total_duration||0),0)},eh=async t=>{if(t.preventDefault(),e&&er.category_id&&er.description.trim()){eo(!0);try{ei?await ec.from("daily_tasks").update({brand_id:er.brand_id||null,category_id:er.category_id,description:er.description.trim()}).eq("id",ei.id):await ec.from("daily_tasks").insert({user_id:e.id,brand_id:er.brand_id||null,category_id:er.category_id,description:er.description.trim(),status:"active",start_time:new Date().toISOString(),total_duration:0,revision_count:0,work_date:I}),X(!1),el(null),en({brand_id:"",category_id:"",description:""}),em()}catch(e){console.error("Save error:",e)}finally{eo(!1)}}},eu=async e=>{let t=new Date,s=new Date(e.start_time).getTime(),a=Math.floor((t.getTime()-s)/1e3);await ec.from("daily_tasks").update({status:"paused",paused_at:t.toISOString(),total_duration:(e.total_duration||0)+a}).eq("id",e.id),em()},eb=async e=>{await ec.from("daily_tasks").update({status:"active",start_time:new Date().toISOString(),paused_at:null}).eq("id",e.id),em()},eg=async e=>{let t=new Date,s=e.total_duration||0;if("active"===e.status){let a=new Date(e.start_time).getTime();s+=Math.floor((t.getTime()-a)/1e3)}await ec.from("daily_tasks").update({status:"completed",end_time:t.toISOString(),total_duration:s}).eq("id",e.id),em()},ep=e=>{ea(e),et(!0)},ej=async e=>{if(!es)return;let t=new Date;await ec.from("daily_tasks").update({status:"active",start_time:t.toISOString(),end_time:null,revision_count:es.revision_count+1}).eq("id",es.id),await ec.from("task_revisions").insert({task_id:es.id,revision_number:es.revision_count+1,note:e||null,start_time:t.toISOString(),duration:0}),et(!1),ea(null),em()},ef=async e=>{await ec.from("daily_tasks").update({status:"active",start_time:new Date().toISOString(),end_time:null}).eq("id",e.id),em()},eN=async e=>{confirm("Bu işi silmek istediğine emin misin?")&&(await ec.from("daily_tasks").delete().eq("id",e.id),em())},ev=e=>{el(e),en({brand_id:e.brand_id||"",category_id:e.category_id,description:e.description}),X(!0)},ew=e=>{let t=new Date(I);t.setDate(t.getDate()+e),P(t.toISOString().split("T")[0])},ey=()=>{P(new Date().toISOString().split("T")[0])};return o?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Günlük İşler"}),(0,t.jsx)("p",{className:"text-sm text-zinc-400",children:"Tüm personelin günlük iş kayıtları"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(A.Button,{onClick:()=>{alert("Excel export özelliği yakında eklenecek!")},className:"bg-emerald-500 hover:bg-emerald-600 text-white",children:[(0,t.jsx)(z.Download,{className:"w-4 h-4 mr-2"}),"Excel İndir"]}),(0,t.jsxs)(A.Button,{onClick:()=>{el(null),en({brand_id:"",category_id:"",description:""}),X(!0)},className:"bg-gradient-to-r from-indigo-500 to-violet-500 hover:from-indigo-600 hover:to-violet-600 text-white",children:[(0,t.jsx)(n.Plus,{className:"w-4 h-4 mr-2"}),"İş Ekle"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-5 gap-4",children:[(0,t.jsx)(Y,{icon:(0,t.jsx)(C.ListChecks,{className:"w-5 h-5"}),value:ex.total,label:"Toplam İş",color:"indigo"}),(0,t.jsx)(Y,{icon:(0,t.jsx)(g.CheckCircle,{className:"w-5 h-5"}),value:ex.completed,label:"Tamamlanan",color:"emerald"}),(0,t.jsx)(Y,{icon:(0,t.jsx)(S,{className:"w-5 h-5"}),value:ex.active,label:"Devam Eden",color:"amber",subtitle:"Şu an"}),(0,t.jsx)(Y,{icon:(0,t.jsx)(w.RefreshCw,{className:"w-5 h-5"}),value:ex.revisions,label:"Revize",color:"rose"}),(0,t.jsx)(Y,{icon:(0,t.jsx)(p.Clock,{className:"w-5 h-5"}),value:B(ex.totalDuration),label:"Toplam Süre",color:"cyan"})]}),(0,t.jsx)("div",{className:"glass-card rounded-2xl p-4 border border-white/10 glow-violet",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>ew(-1),className:"p-1.5 rounded-lg bg-white/5 border border-white/10 text-zinc-400 hover:text-white hover:bg-white/10 transition-all",children:(0,t.jsx)(j.ChevronLeft,{className:"w-4 h-4"})}),(0,t.jsxs)("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/5 border border-white/10 text-white hover:bg-white/10 transition-all",children:[(0,t.jsx)(d.Calendar,{className:"w-4 h-4 text-indigo-400"}),(0,t.jsx)("span",{className:"font-semibold",children:G(I)})]}),(0,t.jsx)("button",{onClick:()=>ew(1),className:"p-1.5 rounded-lg bg-white/5 border border-white/10 text-zinc-400 hover:text-white hover:bg-white/10 transition-all",children:(0,t.jsx)(f.ChevronRight,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:ey,className:"ml-2 px-2.5 py-1 rounded-lg bg-indigo-500/20 border border-indigo-500/30 text-indigo-400 text-xs font-medium hover:bg-indigo-500/30 transition-all",children:"Bugün"}),(0,t.jsx)("div",{className:"w-px h-8 bg-white/10"}),(0,t.jsx)("span",{className:"text-zinc-400",children:L(I)})]}),(0,t.jsxs)("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/5 border border-white/10 text-zinc-300 hover:bg-white/10 transition-all",children:[(0,t.jsx)(d.Calendar,{className:"w-4 h-4 text-zinc-500"}),(0,t.jsx)("span",{className:"text-sm",children:new Date(I).toLocaleDateString("tr-TR",{month:"long",year:"numeric"})}),(0,t.jsx)(R.ChevronDown,{className:"w-4 h-4 text-zinc-500"})]})]})}),(0,t.jsx)("div",{className:"glass-card rounded-xl p-4 border border-white/10",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Users,{className:"w-4 h-4 text-zinc-500"}),(0,t.jsx)("span",{className:"text-sm text-zinc-400",children:"Personel:"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsxs)("button",{onClick:()=>Z("all"),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${"all"===K?"bg-indigo-500/20 border border-indigo-500/30 text-indigo-400":"bg-white/5 border border-white/10 text-zinc-400 hover:bg-white/10"}`,children:[(0,t.jsx)(b.Users,{className:"w-4 h-4"}),"Tümü"]}),T.map(e=>{let s;return(0,t.jsxs)("button",{onClick:()=>Z(e.id),className:`flex items-center gap-2 px-2 py-1 rounded-lg transition-all ${K===e.id?"bg-indigo-500/20 border border-indigo-500/30":"bg-white/5 border border-white/10 hover:bg-white/10"}`,children:[(0,t.jsx)("div",{className:`h-6 w-6 rounded-full bg-gradient-to-br ${q(e.full_name)} flex items-center justify-center`,children:(0,t.jsx)("span",{className:"text-white text-[10px] font-bold",children:e.full_name?.charAt(0)||"?"})}),(0,t.jsx)("span",{className:"text-xs text-zinc-300",children:e.full_name?.split(" ")[0]}),(0,t.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-emerald-500/20 text-emerald-400",children:(s=e.id,c.filter(e=>e.user_id===s).length)})]},e.id)})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-500",children:"Marka:"}),(0,t.jsxs)(r.Select,{value:J,onValueChange:Q,children:[(0,t.jsx)(r.SelectTrigger,{className:"w-[180px] h-10 rounded-xl bg-white/5 border-white/10 text-zinc-300 text-sm",children:(0,t.jsx)(r.SelectValue,{placeholder:"Tümü"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"all",children:"Tümü"}),O.map(e=>(0,t.jsx)(r.SelectItem,{value:e.id,children:e.brand_name},e.id))]})]})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"col-span-2 space-y-3",children:E?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(u.Loader2,{className:"w-8 h-8 animate-spin text-indigo-500"})}):0===c.length?(0,t.jsxs)("div",{className:"text-center py-12 glass-card rounded-2xl border border-white/10",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-zinc-800 flex items-center justify-center",children:(0,t.jsx)(d.Calendar,{className:"w-8 h-8 text-zinc-600"})}),(0,t.jsx)("p",{className:"text-zinc-400",children:"Bu tarihte kayıtlı iş yok"}),(0,t.jsxs)(A.Button,{onClick:()=>{el(null),en({brand_id:"",category_id:"",description:""}),X(!0)},className:"mt-4 bg-gradient-to-r from-indigo-500 to-violet-500 hover:from-indigo-600 hover:to-violet-600",children:[(0,t.jsx)(n.Plus,{className:"w-4 h-4 mr-2"}),"İlk İşi Ekle"]})]}):c.map(e=>(0,t.jsx)(V,{task:e,isAdmin:o,revisions:x,onPause:eu,onResume:eb,onComplete:eg,onStartRevision:ep,onReopen:ef,onEdit:ev,onDelete:eN},e.id))}),(0,t.jsx)(H,{tasks:c,users:T})]}),W&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-white/10 shadow-2xl",style:{backgroundColor:"#18181b"},children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-white/10",children:(0,t.jsx)("h2",{className:"text-lg font-semibold text-white",children:ei?"İşi Düzenle":"Yeni İş Ekle"})}),(0,t.jsxs)("form",{onSubmit:eh,children:[(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:["Marka ",(0,t.jsx)("span",{className:"text-zinc-500",children:"(Opsiyonel)"})]}),(0,t.jsxs)(r.Select,{value:er.brand_id||"none",onValueChange:e=>en({...er,brand_id:"none"===e?"":e}),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-full h-11 rounded-xl bg-white/5 border-white/10 text-white",children:(0,t.jsx)(r.SelectValue,{placeholder:"Genel"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"none",children:"Genel"}),O.map(e=>(0,t.jsx)(r.SelectItem,{value:e.id,children:e.brand_name},e.id))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:["Kategori ",(0,t.jsx)("span",{className:"text-rose-400",children:"*"})]}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:_.map(e=>{let s=l.CATEGORY_COLORS[e.slug]||l.CATEGORY_COLORS.genel;return(0,t.jsx)("button",{type:"button",onClick:()=>en({...er,category_id:e.id}),className:`px-3 py-2 rounded-xl text-xs font-medium transition-all ${s.bg} ${s.text} border ${s.border} ${er.category_id===e.id?"ring-2 ring-indigo-500 ring-offset-2 ring-offset-[#18181b]":"hover:opacity-80"}`,children:e.name},e.id)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:["Açıklama ",(0,t.jsx)("span",{className:"text-rose-400",children:"*"})]}),(0,t.jsx)("textarea",{value:er.description,onChange:e=>en({...er,description:e.target.value}),placeholder:"Ne yapıyorsun?",rows:3,className:"w-full px-4 py-3 rounded-xl text-sm text-white bg-white/5 border border-white/10 placeholder:text-zinc-500 focus:outline-none focus:border-indigo-500/50 focus:ring-2 focus:ring-indigo-500/20 resize-none transition-all",required:!0})]})]}),(0,t.jsxs)("div",{className:"px-6 py-4 border-t border-white/10 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>X(!1),className:"h-11 px-5 rounded-xl text-sm font-medium bg-white/5 border border-white/10 text-zinc-300 hover:bg-white/10 active:scale-[0.98] transition-all",children:"İptal"}),(0,t.jsxs)("button",{type:"submit",disabled:ed||!er.category_id||!er.description.trim(),className:"h-11 px-5 rounded-xl text-white text-sm font-medium bg-gradient-to-r from-indigo-600 to-violet-600 shadow-lg shadow-indigo-500/25 hover:shadow-indigo-500/40 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[ed?(0,t.jsx)(u.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(h.Check,{className:"w-4 h-4"}),ei?"Güncelle":"Başlat"]})]})]})]})}),ee&&es&&(0,t.jsx)(F,{task:es,onClose:()=>{et(!1),ea(null)},onSubmit:ej})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Günlük İşler"}),(0,t.jsx)("p",{className:"text-sm text-zinc-400",children:"Günlük iş kayıtlarım"})]}),(0,t.jsxs)(A.Button,{onClick:()=>{el(null),en({brand_id:"",category_id:"",description:""}),X(!0)},className:"bg-gradient-to-r from-indigo-500 to-violet-500 hover:from-indigo-600 hover:to-violet-600 text-white",children:[(0,t.jsx)(n.Plus,{className:"w-4 h-4 mr-2"}),"İş Ekle"]})]}),(0,t.jsx)("div",{className:"glass-card rounded-2xl p-4 border border-white/10 glow-violet",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>ew(-1),className:"p-1.5 rounded-lg bg-white/5 border border-white/10 text-zinc-400 hover:text-white hover:bg-white/10 transition-all",children:(0,t.jsx)(j.ChevronLeft,{className:"w-4 h-4"})}),(0,t.jsxs)("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/5 border border-white/10 text-white hover:bg-white/10 transition-all",children:[(0,t.jsx)(d.Calendar,{className:"w-4 h-4 text-indigo-400"}),(0,t.jsx)("span",{className:"font-semibold",children:G(I)})]}),(0,t.jsx)("button",{onClick:()=>ew(1),className:"p-1.5 rounded-lg bg-white/5 border border-white/10 text-zinc-400 hover:text-white hover:bg-white/10 transition-all",children:(0,t.jsx)(f.ChevronRight,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:ey,className:"ml-2 px-2.5 py-1 rounded-lg bg-indigo-500/20 border border-indigo-500/30 text-indigo-400 text-xs font-medium hover:bg-indigo-500/30 transition-all",children:"Bugün"}),(0,t.jsx)("div",{className:"w-px h-8 bg-white/10"}),(0,t.jsx)("span",{className:"text-zinc-400",children:L(I)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(C.ListChecks,{className:"w-4 h-4 text-indigo-400"}),(0,t.jsx)("span",{className:"text-sm text-zinc-400",children:"Bugün:"}),(0,t.jsxs)("span",{className:"text-sm font-bold text-white",children:[ex.total," iş"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Clock,{className:"w-4 h-4 text-cyan-400"}),(0,t.jsx)("span",{className:"text-sm text-zinc-400",children:"Toplam:"}),(0,t.jsx)("span",{className:"text-sm font-bold text-white",children:B(ex.totalDuration)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(w.RefreshCw,{className:"w-4 h-4 text-rose-400"}),(0,t.jsx)("span",{className:"text-sm text-zinc-400",children:"Revize:"}),(0,t.jsx)("span",{className:"text-sm font-bold text-rose-400",children:ex.revisions})]})]})]})}),(0,t.jsx)("div",{className:"glass-card rounded-xl p-3 border border-white/10",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(b.Users,{className:"w-4 h-4 text-zinc-500"}),(0,t.jsx)("span",{className:"text-sm text-zinc-400",children:"Personel:"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`h-6 w-6 rounded-full bg-gradient-to-br ${q(e?.full_name||null)} flex items-center justify-center`,children:(0,t.jsx)("span",{className:"text-white text-[10px] font-bold",children:e?.full_name?.charAt(0)||"?"})}),(0,t.jsx)("span",{className:"text-sm font-medium text-white",children:e?.full_name}),(0,t.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded bg-emerald-500/20 text-emerald-400",children:[ex.total," iş"]})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"col-span-2 space-y-3",children:E?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(u.Loader2,{className:"w-8 h-8 animate-spin text-indigo-500"})}):0===c.length?(0,t.jsxs)("div",{className:"text-center py-12 glass-card rounded-2xl border border-white/10",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-zinc-800 flex items-center justify-center",children:(0,t.jsx)(d.Calendar,{className:"w-8 h-8 text-zinc-600"})}),(0,t.jsx)("p",{className:"text-zinc-400",children:"Bu tarihte kayıtlı iş yok"}),(0,t.jsxs)(A.Button,{onClick:()=>{el(null),en({brand_id:"",category_id:"",description:""}),X(!0)},className:"mt-4 bg-gradient-to-r from-indigo-500 to-violet-500 hover:from-indigo-600 hover:to-violet-600",children:[(0,t.jsx)(n.Plus,{className:"w-4 h-4 mr-2"}),"İlk İşi Ekle"]})]}):c.map(e=>(0,t.jsx)(V,{task:e,isAdmin:!1,revisions:x,onPause:eu,onResume:eb,onComplete:eg,onStartRevision:ep,onReopen:ef,onEdit:ev,onDelete:eN},e.id))}),(0,t.jsx)(U,{tasks:c,allMonthTasks:v,categories:_})]}),W&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-white/10 shadow-2xl",style:{backgroundColor:"#18181b"},children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-white/10",children:(0,t.jsx)("h2",{className:"text-lg font-semibold text-white",children:ei?"İşi Düzenle":"Yeni İş Ekle"})}),(0,t.jsxs)("form",{onSubmit:eh,children:[(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:["Marka ",(0,t.jsx)("span",{className:"text-zinc-500",children:"(Opsiyonel)"})]}),(0,t.jsxs)(r.Select,{value:er.brand_id||"none",onValueChange:e=>en({...er,brand_id:"none"===e?"":e}),children:[(0,t.jsx)(r.SelectTrigger,{className:"w-full h-11 rounded-xl bg-white/5 border-white/10 text-white",children:(0,t.jsx)(r.SelectValue,{placeholder:"Genel"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"none",children:"Genel"}),O.map(e=>(0,t.jsx)(r.SelectItem,{value:e.id,children:e.brand_name},e.id))]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:["Kategori ",(0,t.jsx)("span",{className:"text-rose-400",children:"*"})]}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:_.map(e=>{let s=l.CATEGORY_COLORS[e.slug]||l.CATEGORY_COLORS.genel;return(0,t.jsx)("button",{type:"button",onClick:()=>en({...er,category_id:e.id}),className:`px-3 py-2 rounded-xl text-xs font-medium transition-all ${s.bg} ${s.text} border ${s.border} ${er.category_id===e.id?"ring-2 ring-indigo-500 ring-offset-2 ring-offset-[#18181b]":"hover:opacity-80"}`,children:e.name},e.id)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:["Açıklama ",(0,t.jsx)("span",{className:"text-rose-400",children:"*"})]}),(0,t.jsx)("textarea",{value:er.description,onChange:e=>en({...er,description:e.target.value}),placeholder:"Ne yapıyorsun?",rows:3,className:"w-full px-4 py-3 rounded-xl text-sm text-white bg-white/5 border border-white/10 placeholder:text-zinc-500 focus:outline-none focus:border-indigo-500/50 focus:ring-2 focus:ring-indigo-500/20 resize-none transition-all",required:!0})]})]}),(0,t.jsxs)("div",{className:"px-6 py-4 border-t border-white/10 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>X(!1),className:"h-11 px-5 rounded-xl text-sm font-medium bg-white/5 border border-white/10 text-zinc-300 hover:bg-white/10 active:scale-[0.98] transition-all",children:"İptal"}),(0,t.jsxs)("button",{type:"submit",disabled:ed||!er.category_id||!er.description.trim(),className:"h-11 px-5 rounded-xl text-white text-sm font-medium bg-gradient-to-r from-indigo-600 to-violet-600 shadow-lg shadow-indigo-500/25 hover:shadow-indigo-500/40 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[ed?(0,t.jsx)(u.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(h.Check,{className:"w-4 h-4"}),ei?"Güncelle":"Başlat"]})]})]})]})}),ee&&es&&(0,t.jsx)(F,{task:es,onClose:()=>{et(!1),ea(null)},onSubmit:ej})]})}e.s(["default",()=>K],6009)}]);